tosca_definitions_version: tosca_simple_yaml_1_3
description: TOSCA Profile for Software-Defined Cars.
metadata:
    template_name: TOSCA SofDCar Profile
    template_author: University of Stuttgart
    template_contact: miles.stoetzner@iste.uni-stuttgart.de
    template_version: 1.0.0-draft
    template_id: sofdcar-profile
    template_license: https://www.apache.org/licenses/LICENSE-2.0
    abbreviations: |
        - ASIL: Automotive Safety Integrity Level
        - CAN: Controller Area Network
        - CAN-FD: Controller Area Network Flexible Data-Rate
        - ECU: Electronic Control Unit
        - GPIO: General-Purpose Input/ Output
        - HPC: High Performance Computer
        - LIDAR: Light Detection and Ranging
        - LIN: Local Interconnect Network
        - MOST: Media-Oriented Systems Transport
        - OBD: On-Board Diagnostics
        - RADAR: Radio Detection and Ranging
    acknowledgments: Partially funded by the [German Federal Ministry for Economic Affairs and Climate Action (BMWK)](https://www.bmwk.de) as part of the research project [SofDCar (19S21002)](https://sofdcar.de).

artifact_types:
    sofdcar.artifacts.Root:
        derived_from: tosca.artifacts.Root
        description: The artifact all other artifacts are derived from.

    sofdcar.artifacts.Deployment:
        derived_from: tosca.artifacts.Deployment
        description: The artifact all other deployment artifacts are derived from.

    sofdcar.artifacts.Implementation:
        derived_from: tosca.artifacts.Implementation
        description: The artifact all other implementation artifacts are derived from.

data_types:
    sofdcar.data.Root:
        derived_from: tosca.datatypes.Root
        description: The data all other data are derived from.

    sofdcar.data.GPIO.Pin:
        derived_from: sofdcar.data.Root
        properties:
            pin:
                type: integer
            direction:
                type: string
                constraints:
                    - valid_values:
                          - in
                          - out

capability_types:
    sofdcar.capabilities.Root:
        derived_from: tosca.capabilities.Root
        description: The capability all other capabilities are derived from.

    sofdcar.capabilities.Host.ECU.Software:
        derived_from: tosca.capabilities.Container
        description: The capability to host an ECU software.

    sofdcar.capabilities.OperatingSystem.RealTime:
        derived_from: tosca.capabilities.OperatingSystem
        description: The capability to provide an OS with real time
        properties:
            time_guarantee:
                type: integer
                required: false
            guarantee_type:
                type: string
                constraints:
                    - valid_values:
                          - hard
                          - firm
                          - soft

    sofdcar.capabilities.Endpoint:
        derived_from: sofdcar.capabilities.Root
        description: The capability to provide an endpoint.

    sofdcar.capabilities.Endpoint.CAN:
        derived_from: sofdcar.capabilities.Endpoint
        description: The capability to provide a CAN endpoint.

    sofdcar.capabilities.Endpoint.CAN-FD:
        derived_from: sofdcar.capabilities.Endpoint
        description: The capability to provide a CAN-FD endpoint.

    sofdcar.capabilities.Endpoint.LIN:
        derived_from: sofdcar.capabilities.Endpoint
        description: The capability to provide a LIN endpoint.

    sofdcar.capabilities.Endpoint.MOST:
        derived_from: sofdcar.capabilities.Endpoint
        description: The capability to provide a MOST endpoint.

    sofdcar.capabilities.Endpoint.GPIO:
        derived_from: sofdcar.capabilities.Endpoint
        description: The capability to provide a GPIO endpoint.

    sofdcar.capabilities.Endpoint.FlexRay:
        derived_from: sofdcar.capabilities.Endpoint
        description: The capability to provide a FlexRay endpoint.

    sofdcar.capabilities.Endpoint.Ethernet:
        derived_from: sofdcar.capabilities.Endpoint
        description: The capability to provide an Ethernet endpoint.

    sofdcar.capabilities.Endpoint.OBD:
        derived_from: sofdcar.capabilities.Endpoint
        description: The capability to provide an OBD endpoint.

interface_types:
    sofdcar.interfaces.Root:
        derived_from: tosca.interfaces.Root
        description: The interface all other interfaces are derived from.

    sofdcar.interfaces.Nodes:
        derived_from: tosca.interfaces.node.lifecycle.Standard
        description: The standard management interface of nodes.
        operations:
            build:
                description: Builds deployment artifacts.

    sofdcar.interfaces.Relationship:
        derived_from: tosca.interfaces.relationship.Configure
        description: The standard management interface for relationships.

relationship_types:
    sofdcar.relationships.Root:
        derived_from: tosca.relationships.Root
        description: The relationship all other relationships are derived from.

    sofdcar.relationships.CAN:
        derived_from: sofdcar.relationships.Root
        description: The relationship for CAN connections.
        properties:
            interface:
                type: string
                description: The interface name at the source at which the CAN bus is available.
                default: can0

            target_interface:
                type: string
                description: The interface name at the target at which the CAN bus is available.
                required: false

            bitrate:
                type: integer
                description: The bitrate of the CAN bus.
                required: false

    sofdcar.relationships.CAN-FD:
        derived_from: sofdcar.relationships.Root
        description: The relationship for CAN-FD connections.

    sofdcar.relationships.LIN:
        derived_from: sofdcar.relationships.Root
        description: The relationship for LIN connections.

    sofdcar.relationships.MOST:
        derived_from: sofdcar.relationships.Root
        description: The relationships for MOST connections.

    sofdcar.relationships.GPIO:
        derived_from: sofdcar.relationships.Root
        description: The relationship for GPIO connections.
        properties:
            pins:
                type: list
                entry_schema:
                    type: sofdcar.data.GPIO.Pin

    sofdcar.relationships.FlexRay:
        derived_from: sofdcar.relationships.Root
        description: The relationship for FlexRay connections.

    sofdcar.relationships.Ethernet:
        derived_from: sofdcar.relationships.Root
        description: The relationship for Ethernet connections.

    sofdcar.relationships.OBD:
        derived_from: sofdcar.relationships.Root
        description: The relationship for OBD connections.

node_types:
    sofdcar.nodes.Root:
        derived_from: tosca.nodes.Root
        description: The node all other nodes are derived from.

    sofdcar.nodes.Vehicle:
        derived_from: tosca.nodes.Root
        description: The node all other vehicles are derived from.

    sofdcar.nodes.Cloud:
        derived_from: tosca.nodes.Root
        description: The node all other clouds are derived from.

    sofdcar.nodes.ECU.Hardware:
        derived_from: sofdcar.nodes.Root
        description: The hardware of en ECU.
        capabilities:
            host:
                type: sofdcar.capabilities.Host.ECU.Software
                valid_source_types: [sofdcar.nodes.ECU.Software]

    sofdcar.nodes.ECU.Software:
        derived_from: sofdcar.nodes.Root
        description: The software running on an ECU.
        requirements:
            - host:
                  capability: sofdcar.capabilities.Host.ECU.Software
                  relationship: tosca.relationships.HostedOn

    sofdcar.nodes.ECU.Runtime:
        derived_from: sofdcar.nodes.ECU.Software
        description: The runtime for an ECU software.
        capabilities:
            host:
                type: sofdcar.capabilities.Host.ECU.Software
                valid_source_types: [sofdcar.nodes.ECU.Software]
        requirements:
            - host:
                  capability: sofdcar.capabilities.Host.ECU.Software
                  relationship: tosca.relationships.HostedOn

    sofdcar.nodes.HPC.Software:
        derived_from: tosca.nodes.SoftwareComponent

    sofdcar.nodes.HPC.Hardware:
        derived_from: sofdcar.nodes.Root
        capabilities:
            host:
                type: tosca.capabilities.Compute
                valid_source_types: [tosca.nodes.SoftwareComponent]

    sofdcar.nodes.Actuator:
        derived_from: sofdcar.nodes.Root

    sofdcar.nodes.Accelerating:
        derived_from: sofdcar.nodes.Root

    sofdcar.nodes.Braking:
        derived_from: sofdcar.nodes.Root

    sofdcar.nodes.Steering:
        derived_from: sofdcar.nodes.Root

    sofdcar.nodes.Sensor:
        derived_from: sofdcar.nodes.Root

    sofdcar.nodes.RADAR:
        derived_from: sofdcar.nodes.Sensor

    sofdcar.nodes.Camera:
        derived_from: sofdcar.nodes.Sensor

    sofdcar.nodes.LIDAR:
        derived_from: sofdcar.nodes.Sensor

    sofdcar.nodes.Ultrasonic:
        derived_from: sofdcar.nodes.Sensor

    sofdcar.nodes.Channel:
        derived_from: sofdcar.nodes.Root
        description: The node all other communication channels are derived from.
        capabilities:
            endpoint:
                type: sofdcar.capabilities.Endpoint
                occurrences: [0, UNBOUNDED]

    sofdcar.nodes.CAN:
        derived_from: sofdcar.nodes.Channel
        properties:
            bitrate:
                type: integer
                required: false
        capabilities:
            endpoint:
                type: sofdcar.capabilities.Endpoint.CAN
                occurrences: [0, UNBOUNDED]

    sofdcar.nodes.CAN-FD:
        derived_from: sofdcar.nodes.Channel
        capabilities:
            endpoint:
                type: sofdcar.capabilities.Endpoint.CAN-FD
                occurrences: [0, UNBOUNDED]

    sofdcar.nodes.LIN:
        derived_from: sofdcar.nodes.Channel
        capabilities:
            endpoint:
                type: sofdcar.capabilities.Endpoint.LIN
                occurrences: [0, UNBOUNDED]

    sofdcar.nodes.MOST:
        derived_from: sofdcar.nodes.Channel
        capabilities:
            endpoint:
                type: sofdcar.capabilities.Endpoint.MOST
                occurrences: [0, UNBOUNDED]

    sofdcar.nodes.GPIO:
        derived_from: sofdcar.nodes.Channel
        capabilities:
            endpoint:
                type: sofdcar.capabilities.Endpoint.GPIO
                occurrences: [2, 2]

    sofdcar.nodes.FlexRay:
        derived_from: sofdcar.nodes.Channel
        capabilities:
            endpoint:
                type: sofdcar.capabilities.Endpoint.FlexRay
                occurrences: [0, UNBOUNDED]

    sofdcar.nodes.Ethernet:
        derived_from: sofdcar.nodes.Channel
        capabilities:
            endpoint:
                type: sofdcar.capabilities.Endpoint.Ethernet
                occurrences: [2, 2]

    sofdcar.nodes.OBD:
        derived_from: sofdcar.nodes.Channel
        capabilities:
            endpoint:
                type: sofdcar.capabilities.Endpoint.OBD
                occurrences: [2, 2]

group_types:
    sofdcar.groups.Root:
        derived_from: tosca.groups.Root
        description: The group all other groups are derived from.

    sofdcar.groups.Location:
        derived_from: sofdcar.groups.Root
        description: The geographical location of the components.

    sofdcar.groups.Domain:
        derived_from: sofdcar.groups.Root
        description: The domain in a domain-oriented architecture.

    sofdcar.groups.Zone:
        derived_from: sofdcar.groups.Root
        description: The zone in a zone-oriented architecture.

policy_types:
    sofdcar.policies.Root:
        derived_from: tosca.policies.Root
        description: The policy all other policies are derived from.

    sofdcar.policies.Security:
        derived_from: sofdcar.policies.Root
        description: The policy all other policies are derived from.

    sofdcar.policies.Safety:
        derived_from: sofdcar.policies.Root
        description: The policy all safety-related policies are derived from.

    sofdcar.policies.ASIL:
        derived_from: sofdcar.policies.Safety
        description: The policy that all other ASIL policies are derived from.

    sofdcar.policies.ASIL.A:
        derived_from: sofdcar.policies.ASIL
        description: The policy that represents the ASIL level A.

    sofdcar.policies.ASIL.B:
        derived_from: sofdcar.policies.ASIL
        description: The policy that represents the ASIL level B.

    sofdcar.policies.ASIL.C:
        derived_from: sofdcar.policies.ASIL
        description: The policy that represents the ASIL level C.

    sofdcar.policies.ASIL.D:
        derived_from: sofdcar.policies.ASIL
        description: The policy that represents the ASIL level D.
