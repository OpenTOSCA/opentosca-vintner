tosca_definitions_version: tosca_simple_yaml_1_3

# See also https://github.com/UST-EDMM/edmm/blob/7f550a19155a702474f512e54ff2ddb148c003dd/docs/types.yml
# and https://docs.oasis-open.org/tosca/TOSCA-Simple-Profile-YAML/v1.3/os/TOSCA-Simple-Profile-YAML-v1.3-os.html

node_types:
    ###################################################
    #
    # Root
    #
    ###################################################

    root:
        derived_from: tosca.nodes.Root

    ###################################################
    #
    # Software Application
    #
    ###################################################

    software.application:
        derived_from: root
        requirements:
            - host:
                  capability: tosca.capabilities.Compute
                  relationship: tosca.relationships.HostedOn

    go.application:
        derived_from: software.application
        properties:
            application_name:
                type: string

            application_port:
                type: string

            application_protocol:
                type: string

            application_image:
                type: string

        attributes:
            application_address:
                type: string

            application_endpoint:
                type: string
                default: {concat: [{eval: '.::application_protocol'}, '://', {eval: '.::application_address'}, ':', {eval: '.::application_port'}]}

    python.application:
        derived_from: software.application
        properties:
            application_name:
                type: string

            application_port:
                type: string

            application_protocol:
                type: string

            application_image:
                type: string

        attributes:
            application_address:
                type: string

            application_endpoint:
                type: string
                default: {concat: [{eval: '.::application_protocol'}, '://', {eval: '.::application_address'}, ':', {eval: '.::application_port'}]}

    node.application:
        derived_from: software.application
        properties:
            application_name:
                type: string

            application_port:
                type: string

            application_protocol:
                type: string

            application_image:
                type: string

        attributes:
            application_address:
                type: string

            application_endpoint:
                type: string
                default: {concat: [{eval: '.::application_protocol'}, '://', {eval: '.::application_address'}, ':', {eval: '.::application_port'}]}

    dotnet.application:
        derived_from: software.application
        properties:
            application_name:
                type: string

            application_port:
                type: string

            application_protocol:
                type: string

            application_image:
                type: string

        attributes:
            application_address:
                type: string

            application_endpoint:
                type: string
                default: {concat: [{eval: '.::application_protocol'}, '://', {eval: '.::application_address'}, ':', {eval: '.::application_port'}]}

    java.application:
        derived_from: software.application
        properties:
            application_name:
                type: string

            application_port:
                type: string

            application_protocol:
                type: string

            application_image:
                type: string

        attributes:
            application_address:
                type: string

            application_endpoint:
                type: string
                default: {concat: [{eval: '.::application_protocol'}, '://', {eval: '.::application_address'}, ':', {eval: '.::application_port'}]}

    ###################################################
    #
    # Compute
    #
    ###################################################

    compute:
        derived_from: root

    ###################################################
    #
    # Database
    #
    ###################################################

    database:
        derived_from: root

    relational.database:
        derived_from: database

    dbms:
        derived_from: root

    relational.dbms:
        derived_from: dbms
