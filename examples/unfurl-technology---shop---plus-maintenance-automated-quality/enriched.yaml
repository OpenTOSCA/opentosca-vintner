tosca_definitions_version: tosca_variability_1_0_rc_3
imports:
    - file: lib/types.yaml
      conditions: []
topology_template:
    inputs:
        - database_password:
              type: string
              conditions:
                  - is_consumed: 0
                    _generated: true
        - dbms_password:
              type: string
              conditions:
                  - is_consumed: 1
                    _generated: true
        - os_network:
              type: string
              conditions:
                  - is_consumed: 2
                    _generated: true
        - os_ssh_key_name:
              type: string
              conditions:
                  - is_consumed: 3
                    _generated: true
        - os_ssh_user:
              type: string
              conditions:
                  - is_consumed: 4
                    _generated: true
        - os_ssh_key_file:
              type: string
              conditions:
                  - is_consumed: 5
                    _generated: true
        - os_region_name:
              type: string
              conditions:
                  - is_consumed: 6
                    _generated: true
        - os_auth_type:
              type: string
              conditions:
                  - is_consumed: 7
                    _generated: true
        - os_auth_url:
              type: string
              conditions:
                  - is_consumed: 8
                    _generated: true
        - os_identity_api_version:
              type: string
              conditions:
                  - is_consumed: 9
                    _generated: true
        - os_interface:
              type: string
              conditions:
                  - is_consumed: 10
                    _generated: true
        - os_application_credential_id:
              type: string
              conditions:
                  - is_consumed: 11
                    _generated: true
        - os_application_credential_secret:
              type: string
              conditions:
                  - is_consumed: 12
                    _generated: true
        - gcp_region:
              type: string
              conditions:
                  - is_consumed: 13
                    _generated: true
        - gcp_service_account_file:
              type: string
              conditions:
                  - is_consumed: 14
                    _generated: true
        - gcp_project:
              type: string
              conditions:
                  - is_consumed: 15
                    _generated: true
        - k8s_host:
              type: string
              conditions:
                  - is_consumed: 16
                    _generated: true
        - k8s_ca_cert_file:
              type: string
              conditions:
                  - is_consumed: 17
                    _generated: true
        - k8s_client_cert_file:
              type: string
              conditions:
                  - is_consumed: 18
                    _generated: true
        - k8s_client_key_file:
              type: string
              conditions:
                  - is_consumed: 19
                    _generated: true
    variability:
        inputs:
            env:
                type: string
            tier:
                type: string
            premium_feature:
                type: boolean
            optional_feature:
                type: boolean
        constraints:
            - amo:
                  - artifact.container_image@0.node.shop
            - amo:
                  - artifact.source_archive@1.node.shop
            - amo:
                  - property.application_name@0.node.shop
            - amo:
                  - property.DB_NAME@1.node.shop
            - amo:
                  - property.DB_USERNAME@2.node.shop
            - amo:
                  - property.DB_PASSWORD@3.node.shop
            - amo:
                  - property.DB_DIALECT@4.node.shop
            - amo:
                  - property.DB_ADDRESS@5.node.shop
            - amo:
                  - property.DB_PORT@6.node.shop
            - amo:
                  - property.premium_feature@7.node.shop
                  - property.premium_feature@8.node.shop
            - amo:
                  - property.optional_feature@9.node.shop
                  - property.optional_feature@10.node.shop
            - amo:
                  - property.database_name@0.node.database
            - amo:
                  - property.database_user@1.node.database
            - amo:
                  - property.database_password@2.node.database
            - amo:
                  - property.dbms_name@0.node.mysql_dbms
            - amo:
                  - property.dbms_password@1.node.mysql_dbms
            - amo:
                  - property.machine_name@0.node.virtual_machine
            - amo:
                  - property.image@1.node.virtual_machine
            - amo:
                  - property.ports@2.node.virtual_machine
            - amo:
                  - property.flavor@3.node.virtual_machine
                  - property.flavor@4.node.virtual_machine
            - amo:
                  - property.network@5.node.virtual_machine
            - amo:
                  - property.ssh_user@6.node.virtual_machine
            - amo:
                  - property.ssh_key_name@7.node.virtual_machine
            - amo:
                  - property.ssh_key_file@8.node.virtual_machine
            - amo:
                  - property.os_region_name@0.node.openstack
            - amo:
                  - property.os_auth_type@1.node.openstack
            - amo:
                  - property.os_auth_url@2.node.openstack
            - amo:
                  - property.os_identity_api_version@3.node.openstack
            - amo:
                  - property.os_interface@4.node.openstack
            - amo:
                  - property.os_application_credential_id@5.node.openstack
            - amo:
                  - property.os_application_credential_secret@6.node.openstack
            - amo:
                  - property.gcp_region@0.node.gcp_provider
            - amo:
                  - property.gcp_service_account_file@1.node.gcp_provider
            - amo:
                  - property.gcp_project@2.node.gcp_provider
            - amo:
                  - property.k8s_host@0.node.kubernetes
            - amo:
                  - property.k8s_ca_cert_file@1.node.kubernetes
            - amo:
                  - property.k8s_client_cert_file@2.node.kubernetes
            - amo:
                  - property.k8s_client_key_file@3.node.kubernetes
            - implies:
                  - node.shop
                  - xor:
                        - relation.host@1.node.shop
                        - relation.host@2.node.shop
                        - relation.host@3.node.shop
            - implies:
                  - node.shop_ingress
                  - xor:
                        - relation.host@1.node.shop_ingress
                        - relation.host@2.node.shop_ingress
            - implies:
                  - node.database
                  - relation.host@0.node.database
            - implies:
                  - node.mysql_dbms
                  - xor:
                        - relation.host@0.node.mysql_dbms
                        - relation.host@1.node.mysql_dbms
                        - relation.host@2.node.mysql_dbms
            - implies:
                  - node.node_runtime
                  - relation.host@0.node.node_runtime
            - implies:
                  - node.virtual_machine
                  - relation.host@0.node.virtual_machine
            - implies:
                  - node.gcp_appengine
                  - relation.host@0.node.gcp_appengine
            - implies:
                  - node.gcp_cloudbuild
                  - relation.host@0.node.gcp_cloudbuild
            - implies:
                  - node.gcp_cloudsql
                  - relation.host@0.node.gcp_cloudsql
            - implies:
                  - node.shop
                  - xor:
                        - artifact.container_image@0.node.shop
                        - artifact.source_archive@1.node.shop
            - implies:
                  - node.shop
                  - xor:
                        - technology.ansible@0.node.shop
                        - technology.ansible@1.node.shop
                        - technology.ansible@2.node.shop
                        - technology.ansible@3.node.shop
                        - technology.terraform@4.node.shop
                        - technology.terraform@5.node.shop
                        - technology.terraform@6.node.shop
                        - technology.terraform@7.node.shop
                        - technology.kubernetes@8.node.shop
            - implies:
                  - node.shop_ingress
                  - xor:
                        - technology.ansible@0.node.shop_ingress
                        - technology.ansible@1.node.shop_ingress
                        - technology.terraform@2.node.shop_ingress
                        - technology.terraform@3.node.shop_ingress
                        - technology.kubernetes@4.node.shop_ingress
            - implies:
                  - node.database
                  - xor:
                        - technology.ansible@0.node.database
                        - technology.ansible@1.node.database
                        - technology.ansible@2.node.database
                        - technology.terraform@3.node.database
                        - technology.terraform@4.node.database
                        - technology.terraform@5.node.database
                        - technology.kubernetes@6.node.database
            - implies:
                  - node.mysql_dbms
                  - xor:
                        - technology.ansible@0.node.mysql_dbms
                        - technology.ansible@1.node.mysql_dbms
                        - technology.ansible@2.node.mysql_dbms
                        - technology.terraform@3.node.mysql_dbms
                        - technology.terraform@4.node.mysql_dbms
                        - technology.terraform@5.node.mysql_dbms
                        - technology.kubernetes@6.node.mysql_dbms
            - implies:
                  - node.node_runtime
                  - xor:
                        - technology.ansible@0.node.node_runtime
                        - technology.terraform@1.node.node_runtime
            - implies:
                  - node.virtual_machine
                  - xor:
                        - technology.ansible@0.node.virtual_machine
                        - technology.terraform@1.node.virtual_machine
            - implies:
                  - node.gcp_appengine
                  - xor:
                        - technology.ansible@0.node.gcp_appengine
                        - technology.terraform@1.node.gcp_appengine
            - implies:
                  - node.gcp_appenginereporting
                  - xor:
                        - technology.ansible@0.node.gcp_appenginereporting
                        - technology.terraform@1.node.gcp_appenginereporting
            - implies:
                  - node.gcp_cloudbuild
                  - xor:
                        - technology.ansible@0.node.gcp_cloudbuild
                        - technology.terraform@1.node.gcp_cloudbuild
            - implies:
                  - node.gcp_cloudsql
                  - xor:
                        - technology.ansible@0.node.gcp_cloudsql
                        - technology.terraform@1.node.gcp_cloudsql
            - amo:
                  - input.database_password@0
            - amo:
                  - input.dbms_password@1
            - amo:
                  - input.os_network@2
            - amo:
                  - input.os_ssh_key_name@3
            - amo:
                  - input.os_ssh_user@4
            - amo:
                  - input.os_ssh_key_file@5
            - amo:
                  - input.os_region_name@6
            - amo:
                  - input.os_auth_type@7
            - amo:
                  - input.os_auth_url@8
            - amo:
                  - input.os_identity_api_version@9
            - amo:
                  - input.os_interface@10
            - amo:
                  - input.os_application_credential_id@11
            - amo:
                  - input.os_application_credential_secret@12
            - amo:
                  - input.gcp_region@13
            - amo:
                  - input.gcp_service_account_file@14
            - amo:
                  - input.gcp_project@15
            - amo:
                  - input.k8s_host@16
            - amo:
                  - input.k8s_ca_cert_file@17
            - amo:
                  - input.k8s_client_cert_file@18
            - amo:
                  - input.k8s_client_key_file@19
            - implies:
                  - and:
                        - node.shop
                        - manual.relation.database@0.node.shop
                  - relation.database@0.node.shop
            - implies:
                  - and:
                        - node.shop_ingress
                        - manual.relation.application@0.node.shop_ingress
                  - relation.application@0.node.shop_ingress
            - implies:
                  - and:
                        - node.gcp_appengine
                        - manual.relation.build@1.node.gcp_appengine
                  - relation.build@1.node.gcp_appengine
            - implies:
                  - and:
                        - node.gcp_appengine
                        - manual.relation.reporting@2.node.gcp_appengine
                  - relation.reporting@2.node.gcp_appengine
    node_templates:
        - shop:
              type:
                  - shop.component:
                        conditions:
                            - node_presence: shop
                              _generated: true
              properties:
                  - application_name:
                        value: unfurl-technology-shop
                        conditions:
                            - node_presence: shop
                              _generated: true
                  - DB_NAME:
                        value: unfurl-technology-shop
                        conditions:
                            - node_presence: shop
                              _generated: true
                  - DB_USERNAME:
                        value: root
                        conditions:
                            - node_presence: shop
                              _generated: true
                  - DB_PASSWORD:
                        value:
                            get_input: database_password
                        conditions:
                            - node_presence: shop
                              _generated: true
                  - DB_DIALECT:
                        value: mysql
                        conditions:
                            - node_presence: shop
                              _generated: true
                  - DB_ADDRESS:
                        value:
                            eval: .::.requirements[.name=database]::.target::application_address
                        conditions:
                            - node_presence: shop
                              _generated: true
                  - DB_PORT:
                        value:
                            eval: .::.requirements[.name=database]::.target::application_port
                        conditions:
                            - node_presence: shop
                              _generated: true
                  - premium_feature:
                        value: true
                        conditions:
                            - node_presence: shop
                              _generated: true
                            - equal:
                                  - variability_input: premium_feature
                                  - true
                  - premium_feature:
                        value: false
                        conditions:
                            - node_presence: shop
                              _generated: true
                            - not:
                                  equal:
                                      - variability_input: premium_feature
                                      - true
                  - optional_feature:
                        value: true
                        conditions:
                            - node_presence: shop
                              _generated: true
                            - equal:
                                  - variability_input: optional_feature
                                  - true
                  - optional_feature:
                        value: false
                        conditions:
                            - node_presence: shop
                              _generated: true
                            - not:
                                  equal:
                                      - variability_input: optional_feature
                                      - true
              requirements:
                  - database:
                        node: database
                        conditions:
                            - and:
                                  - node_presence: shop
                                    _generated: true
                                  - node_presence: database
                                    _generated: true
                              _generated: true
                  - host:
                        node: virtual_machine
                        conditions:
                            - and:
                                  - node_presence: shop
                                    _generated: true
                                  - node_presence: virtual_machine
                                    _generated: true
                              _generated: true
                  - host:
                        node: gcp_appengine
                        conditions:
                            - and:
                                  - node_presence: shop
                                    _generated: true
                                  - node_presence: gcp_appengine
                                    _generated: true
                              _generated: true
                  - host:
                        node: kubernetes
                        conditions:
                            - and:
                                  - node_presence: shop
                                    _generated: true
                                  - node_presence: kubernetes
                                    _generated: true
                              _generated: true
              artifacts:
                  - container_image:
                        type:
                            - container.image:
                                  conditions:
                                      - artifact_presence:
                                            - shop
                                            - 0
                                        _generated: true
                        file: ghcr.io/opentosca/opentosca-shop-demo@sha256:25ce63b1d399b7d311edc13195abc12d98be859fd32f36f3e96056b32c622b8d
                        conditions:
                            - node_presence: shop
                              _generated: true
                            - node_presence: kubernetes
                  - source_archive:
                        type:
                            - source.archive:
                                  conditions:
                                      - artifact_presence:
                                            - shop
                                            - 1
                                        _generated: true
                        file: files/shop.source.zip
                        conditions:
                            - node_presence: shop
                              _generated: true
                            - not:
                                  node_presence: kubernetes
              technology:
                  - ansible:
                        conditions:
                            - and:
                                  - node_presence: shop
                                    _generated: true
                                  - not:
                                        or:
                                            - technology_presence:
                                                  - shop
                                                  - 1
                                            - technology_presence:
                                                  - shop
                                                  - 2
                                            - technology_presence:
                                                  - shop
                                                  - 3
                                            - technology_presence:
                                                  - shop
                                                  - 4
                                            - technology_presence:
                                                  - shop
                                                  - 5
                                            - technology_presence:
                                                  - shop
                                                  - 6
                                            - technology_presence:
                                                  - shop
                                                  - 7
                                            - technology_presence:
                                                  - shop
                                                  - 8
                                    _bratan: true
                              _generated: true
                            - and:
                                  - node_presence: virtual_machine
                                  - or:
                                        - artifact_presence:
                                              - shop
                                              - 1
                              _generated: true
                        weight: 0.5
                        assign: shop.component#source.archive::ansible@*->virtual.machine
                  - ansible:
                        conditions:
                            - and:
                                  - node_presence: shop
                                    _generated: true
                                  - not:
                                        or:
                                            - technology_presence:
                                                  - shop
                                                  - 0
                                            - technology_presence:
                                                  - shop
                                                  - 2
                                            - technology_presence:
                                                  - shop
                                                  - 3
                                            - technology_presence:
                                                  - shop
                                                  - 4
                                            - technology_presence:
                                                  - shop
                                                  - 5
                                            - technology_presence:
                                                  - shop
                                                  - 6
                                            - technology_presence:
                                                  - shop
                                                  - 7
                                            - technology_presence:
                                                  - shop
                                                  - 8
                                    _bratan: true
                              _generated: true
                            - and:
                                  - node_presence: kubernetes
                                  - or:
                                        - artifact_presence:
                                              - shop
                                              - 0
                              _generated: true
                        weight: 0.5
                        assign: shop.component#container.image::ansible@kubernetes
                  - ansible:
                        conditions:
                            - and:
                                  - node_presence: shop
                                    _generated: true
                                  - not:
                                        or:
                                            - technology_presence:
                                                  - shop
                                                  - 0
                                            - technology_presence:
                                                  - shop
                                                  - 1
                                            - technology_presence:
                                                  - shop
                                                  - 3
                                            - technology_presence:
                                                  - shop
                                                  - 4
                                            - technology_presence:
                                                  - shop
                                                  - 5
                                            - technology_presence:
                                                  - shop
                                                  - 6
                                            - technology_presence:
                                                  - shop
                                                  - 7
                                            - technology_presence:
                                                  - shop
                                                  - 8
                                    _bratan: true
                              _generated: true
                            - and:
                                  - node_presence: gcp_appengine
                                  - or:
                                        - artifact_presence:
                                              - shop
                                              - 1
                              _generated: true
                        weight: 0
                        assign: shop.component#source.archive::ansible@gcp.appengine
                  - ansible:
                        conditions:
                            - and:
                                  - node_presence: shop
                                    _generated: true
                                  - not:
                                        or:
                                            - technology_presence:
                                                  - shop
                                                  - 0
                                            - technology_presence:
                                                  - shop
                                                  - 1
                                            - technology_presence:
                                                  - shop
                                                  - 2
                                            - technology_presence:
                                                  - shop
                                                  - 4
                                            - technology_presence:
                                                  - shop
                                                  - 5
                                            - technology_presence:
                                                  - shop
                                                  - 6
                                            - technology_presence:
                                                  - shop
                                                  - 7
                                            - technology_presence:
                                                  - shop
                                                  - 8
                                    _bratan: true
                              _generated: true
                            - and:
                                  - node_presence: virtual_machine
                                  - or:
                                        - artifact_presence:
                                              - shop
                                              - 1
                              _generated: true
                        weight: 1
                        assign: shop.component#source.archive::ansible@*->virtual.machine
                  - terraform:
                        conditions:
                            - and:
                                  - node_presence: shop
                                    _generated: true
                                  - not:
                                        or:
                                            - technology_presence:
                                                  - shop
                                                  - 0
                                            - technology_presence:
                                                  - shop
                                                  - 1
                                            - technology_presence:
                                                  - shop
                                                  - 2
                                            - technology_presence:
                                                  - shop
                                                  - 3
                                            - technology_presence:
                                                  - shop
                                                  - 5
                                            - technology_presence:
                                                  - shop
                                                  - 6
                                            - technology_presence:
                                                  - shop
                                                  - 7
                                            - technology_presence:
                                                  - shop
                                                  - 8
                                    _bratan: true
                              _generated: true
                            - and:
                                  - node_presence: virtual_machine
                                  - or:
                                        - artifact_presence:
                                              - shop
                                              - 1
                              _generated: true
                        weight: 0
                        assign: shop.component#source.archive::terraform@*->virtual.machine
                  - terraform:
                        conditions:
                            - and:
                                  - node_presence: shop
                                    _generated: true
                                  - not:
                                        or:
                                            - technology_presence:
                                                  - shop
                                                  - 0
                                            - technology_presence:
                                                  - shop
                                                  - 1
                                            - technology_presence:
                                                  - shop
                                                  - 2
                                            - technology_presence:
                                                  - shop
                                                  - 3
                                            - technology_presence:
                                                  - shop
                                                  - 4
                                            - technology_presence:
                                                  - shop
                                                  - 6
                                            - technology_presence:
                                                  - shop
                                                  - 7
                                            - technology_presence:
                                                  - shop
                                                  - 8
                                    _bratan: true
                              _generated: true
                            - and:
                                  - node_presence: kubernetes
                                  - or:
                                        - artifact_presence:
                                              - shop
                                              - 0
                              _generated: true
                        weight: 0.5
                        assign: shop.component#container.image::terraform@kubernetes
                  - terraform:
                        conditions:
                            - and:
                                  - node_presence: shop
                                    _generated: true
                                  - not:
                                        or:
                                            - technology_presence:
                                                  - shop
                                                  - 0
                                            - technology_presence:
                                                  - shop
                                                  - 1
                                            - technology_presence:
                                                  - shop
                                                  - 2
                                            - technology_presence:
                                                  - shop
                                                  - 3
                                            - technology_presence:
                                                  - shop
                                                  - 4
                                            - technology_presence:
                                                  - shop
                                                  - 5
                                            - technology_presence:
                                                  - shop
                                                  - 7
                                            - technology_presence:
                                                  - shop
                                                  - 8
                                    _bratan: true
                              _generated: true
                            - and:
                                  - node_presence: gcp_appengine
                                  - or:
                                        - artifact_presence:
                                              - shop
                                              - 1
                              _generated: true
                        weight: 1
                        assign: shop.component#source.archive::terraform@gcp.appengine
                  - terraform:
                        conditions:
                            - and:
                                  - node_presence: shop
                                    _generated: true
                                  - not:
                                        or:
                                            - technology_presence:
                                                  - shop
                                                  - 0
                                            - technology_presence:
                                                  - shop
                                                  - 1
                                            - technology_presence:
                                                  - shop
                                                  - 2
                                            - technology_presence:
                                                  - shop
                                                  - 3
                                            - technology_presence:
                                                  - shop
                                                  - 4
                                            - technology_presence:
                                                  - shop
                                                  - 5
                                            - technology_presence:
                                                  - shop
                                                  - 6
                                            - technology_presence:
                                                  - shop
                                                  - 8
                                    _bratan: true
                              _generated: true
                            - and:
                                  - node_presence: virtual_machine
                                  - or:
                                        - artifact_presence:
                                              - shop
                                              - 1
                              _generated: true
                        weight: 0
                        assign: shop.component#source.archive::terraform@*->virtual.machine
                  - kubernetes:
                        conditions:
                            - and:
                                  - node_presence: shop
                                    _generated: true
                                  - not:
                                        or:
                                            - technology_presence:
                                                  - shop
                                                  - 0
                                            - technology_presence:
                                                  - shop
                                                  - 1
                                            - technology_presence:
                                                  - shop
                                                  - 2
                                            - technology_presence:
                                                  - shop
                                                  - 3
                                            - technology_presence:
                                                  - shop
                                                  - 4
                                            - technology_presence:
                                                  - shop
                                                  - 5
                                            - technology_presence:
                                                  - shop
                                                  - 6
                                            - technology_presence:
                                                  - shop
                                                  - 7
                                    _bratan: true
                              _generated: true
                            - and:
                                  - node_presence: kubernetes
                                  - or:
                                        - artifact_presence:
                                              - shop
                                              - 0
                              _generated: true
                        weight: 1
                        assign: shop.component#container.image::kubernetes@kubernetes
              conditions: []
        - shop_ingress:
              type:
                  - ingress:
                        conditions:
                            - node_presence: shop_ingress
                              _generated: true
              requirements:
                  - application:
                        node: shop
                        conditions:
                            - and:
                                  - node_presence: shop_ingress
                                    _generated: true
                                  - node_presence: shop
                                    _generated: true
                              _generated: true
                  - host:
                        node: kubernetes
                        conditions:
                            - and:
                                  - node_presence: shop_ingress
                                    _generated: true
                                  - node_presence: kubernetes
                                    _generated: true
                              _generated: true
                  - host:
                        node: virtual_machine
                        conditions:
                            - and:
                                  - node_presence: shop_ingress
                                    _generated: true
                                  - node_presence: virtual_machine
                                    _generated: true
                              _generated: true
              technology:
                  - ansible:
                        conditions:
                            - and:
                                  - node_presence: shop_ingress
                                    _generated: true
                                  - not:
                                        or:
                                            - technology_presence:
                                                  - shop_ingress
                                                  - 1
                                            - technology_presence:
                                                  - shop_ingress
                                                  - 2
                                            - technology_presence:
                                                  - shop_ingress
                                                  - 3
                                            - technology_presence:
                                                  - shop_ingress
                                                  - 4
                                    _bratan: true
                              _generated: true
                            - node_presence: virtual_machine
                              _generated: true
                        weight: 1
                        assign: ingress::ansible@virtual.machine
                  - ansible:
                        conditions:
                            - and:
                                  - node_presence: shop_ingress
                                    _generated: true
                                  - not:
                                        or:
                                            - technology_presence:
                                                  - shop_ingress
                                                  - 0
                                            - technology_presence:
                                                  - shop_ingress
                                                  - 2
                                            - technology_presence:
                                                  - shop_ingress
                                                  - 3
                                            - technology_presence:
                                                  - shop_ingress
                                                  - 4
                                    _bratan: true
                              _generated: true
                            - node_presence: kubernetes
                              _generated: true
                        weight: 0.5
                        assign: ingress::ansible@kubernetes
                  - terraform:
                        conditions:
                            - and:
                                  - node_presence: shop_ingress
                                    _generated: true
                                  - not:
                                        or:
                                            - technology_presence:
                                                  - shop_ingress
                                                  - 0
                                            - technology_presence:
                                                  - shop_ingress
                                                  - 1
                                            - technology_presence:
                                                  - shop_ingress
                                                  - 3
                                            - technology_presence:
                                                  - shop_ingress
                                                  - 4
                                    _bratan: true
                              _generated: true
                            - node_presence: virtual_machine
                              _generated: true
                        weight: 0
                        assign: ingress::terraform@virtual.machine
                  - terraform:
                        conditions:
                            - and:
                                  - node_presence: shop_ingress
                                    _generated: true
                                  - not:
                                        or:
                                            - technology_presence:
                                                  - shop_ingress
                                                  - 0
                                            - technology_presence:
                                                  - shop_ingress
                                                  - 1
                                            - technology_presence:
                                                  - shop_ingress
                                                  - 2
                                            - technology_presence:
                                                  - shop_ingress
                                                  - 4
                                    _bratan: true
                              _generated: true
                            - node_presence: kubernetes
                              _generated: true
                        weight: 0.5
                        assign: ingress::terraform@kubernetes
                  - kubernetes:
                        conditions:
                            - and:
                                  - node_presence: shop_ingress
                                    _generated: true
                                  - not:
                                        or:
                                            - technology_presence:
                                                  - shop_ingress
                                                  - 0
                                            - technology_presence:
                                                  - shop_ingress
                                                  - 1
                                            - technology_presence:
                                                  - shop_ingress
                                                  - 2
                                            - technology_presence:
                                                  - shop_ingress
                                                  - 3
                                    _bratan: true
                              _generated: true
                            - node_presence: kubernetes
                              _generated: true
                        weight: 1
                        assign: ingress::kubernetes@kubernetes
              conditions:
                  - host_presence: SELF
                    _generated: true
        - database:
              type:
                  - mysql.database:
                        conditions:
                            - node_presence: database
                              _generated: true
              properties:
                  - database_name:
                        value: unfurl-technology-shop-database
                        conditions:
                            - node_presence: database
                              _generated: true
                  - database_user:
                        value: unfurl-technology-shop-user
                        conditions:
                            - node_presence: database
                              _generated: true
                  - database_password:
                        value:
                            get_input: database_password
                        conditions:
                            - node_presence: database
                              _generated: true
              requirements:
                  - host:
                        node: mysql_dbms
                        conditions:
                            - and:
                                  - node_presence: database
                                    _generated: true
                                  - node_presence: mysql_dbms
                                    _generated: true
                              _generated: true
              technology:
                  - ansible:
                        conditions:
                            - and:
                                  - node_presence: database
                                    _generated: true
                                  - not:
                                        or:
                                            - technology_presence:
                                                  - database
                                                  - 1
                                            - technology_presence:
                                                  - database
                                                  - 2
                                            - technology_presence:
                                                  - database
                                                  - 3
                                            - technology_presence:
                                                  - database
                                                  - 4
                                            - technology_presence:
                                                  - database
                                                  - 5
                                            - technology_presence:
                                                  - database
                                                  - 6
                                    _bratan: true
                              _generated: true
                            - and:
                                  - node_presence: mysql_dbms
                                  - node_presence: kubernetes
                              _generated: true
                        weight: 1
                        assign: mysql.database::ansible@mysql.dbms->kubernetes
                  - ansible:
                        conditions:
                            - and:
                                  - node_presence: database
                                    _generated: true
                                  - not:
                                        or:
                                            - technology_presence:
                                                  - database
                                                  - 0
                                            - technology_presence:
                                                  - database
                                                  - 2
                                            - technology_presence:
                                                  - database
                                                  - 3
                                            - technology_presence:
                                                  - database
                                                  - 4
                                            - technology_presence:
                                                  - database
                                                  - 5
                                            - technology_presence:
                                                  - database
                                                  - 6
                                    _bratan: true
                              _generated: true
                            - and:
                                  - node_presence: mysql_dbms
                                  - node_presence: gcp_cloudsql
                              _generated: true
                        weight: 1
                        assign: mysql.database::ansible@mysql.dbms->gcp.cloudsql
                  - ansible:
                        conditions:
                            - and:
                                  - node_presence: database
                                    _generated: true
                                  - not:
                                        or:
                                            - technology_presence:
                                                  - database
                                                  - 0
                                            - technology_presence:
                                                  - database
                                                  - 1
                                            - technology_presence:
                                                  - database
                                                  - 3
                                            - technology_presence:
                                                  - database
                                                  - 4
                                            - technology_presence:
                                                  - database
                                                  - 5
                                            - technology_presence:
                                                  - database
                                                  - 6
                                    _bratan: true
                              _generated: true
                            - and:
                                  - node_presence: mysql_dbms
                                  - node_presence: virtual_machine
                              _generated: true
                        weight: 1
                        assign: mysql.database::ansible@mysql.dbms->virtual.machine
                  - terraform:
                        conditions:
                            - and:
                                  - node_presence: database
                                    _generated: true
                                  - not:
                                        or:
                                            - technology_presence:
                                                  - database
                                                  - 0
                                            - technology_presence:
                                                  - database
                                                  - 1
                                            - technology_presence:
                                                  - database
                                                  - 2
                                            - technology_presence:
                                                  - database
                                                  - 4
                                            - technology_presence:
                                                  - database
                                                  - 5
                                            - technology_presence:
                                                  - database
                                                  - 6
                                    _bratan: true
                              _generated: true
                            - and:
                                  - node_presence: mysql_dbms
                                  - node_presence: kubernetes
                              _generated: true
                        weight: 1
                        assign: mysql.database::terraform@mysql.dbms->kubernetes
                  - terraform:
                        conditions:
                            - and:
                                  - node_presence: database
                                    _generated: true
                                  - not:
                                        or:
                                            - technology_presence:
                                                  - database
                                                  - 0
                                            - technology_presence:
                                                  - database
                                                  - 1
                                            - technology_presence:
                                                  - database
                                                  - 2
                                            - technology_presence:
                                                  - database
                                                  - 3
                                            - technology_presence:
                                                  - database
                                                  - 5
                                            - technology_presence:
                                                  - database
                                                  - 6
                                    _bratan: true
                              _generated: true
                            - and:
                                  - node_presence: mysql_dbms
                                  - node_presence: gcp_cloudsql
                              _generated: true
                        weight: 1
                        assign: mysql.database::terraform@mysql.dbms->gcp.cloudsql
                  - terraform:
                        conditions:
                            - and:
                                  - node_presence: database
                                    _generated: true
                                  - not:
                                        or:
                                            - technology_presence:
                                                  - database
                                                  - 0
                                            - technology_presence:
                                                  - database
                                                  - 1
                                            - technology_presence:
                                                  - database
                                                  - 2
                                            - technology_presence:
                                                  - database
                                                  - 3
                                            - technology_presence:
                                                  - database
                                                  - 4
                                            - technology_presence:
                                                  - database
                                                  - 6
                                    _bratan: true
                              _generated: true
                            - and:
                                  - node_presence: mysql_dbms
                                  - node_presence: virtual_machine
                              _generated: true
                        weight: 0
                        assign: mysql.database::terraform@mysql.dbms->virtual.machine
                  - kubernetes:
                        conditions:
                            - and:
                                  - node_presence: database
                                    _generated: true
                                  - not:
                                        or:
                                            - technology_presence:
                                                  - database
                                                  - 0
                                            - technology_presence:
                                                  - database
                                                  - 1
                                            - technology_presence:
                                                  - database
                                                  - 2
                                            - technology_presence:
                                                  - database
                                                  - 3
                                            - technology_presence:
                                                  - database
                                                  - 4
                                            - technology_presence:
                                                  - database
                                                  - 5
                                    _bratan: true
                              _generated: true
                            - and:
                                  - node_presence: mysql_dbms
                                  - node_presence: kubernetes
                              _generated: true
                        weight: 0
                        assign: mysql.database::kubernetes@mysql.dbms->kubernetes
              conditions:
                  - and:
                        - has_incoming_relation_naive: database
                        - host_presence: SELF
                    _generated: true
        - mysql_dbms:
              type:
                  - mysql.dbms:
                        conditions:
                            - node_presence: mysql_dbms
                              _generated: true
              properties:
                  - dbms_name:
                        value: unfurl-technology-shop-dbms
                        conditions:
                            - node_presence: mysql_dbms
                              _generated: true
                  - dbms_password:
                        value:
                            get_input: dbms_password
                        conditions:
                            - node_presence: mysql_dbms
                              _generated: true
              requirements:
                  - host:
                        node: virtual_machine
                        conditions:
                            - and:
                                  - node_presence: mysql_dbms
                                    _generated: true
                                  - node_presence: virtual_machine
                                    _generated: true
                              _generated: true
                  - host:
                        node: kubernetes
                        conditions:
                            - and:
                                  - node_presence: mysql_dbms
                                    _generated: true
                                  - node_presence: kubernetes
                                    _generated: true
                              _generated: true
                  - host:
                        node: gcp_cloudsql
                        conditions:
                            - and:
                                  - node_presence: mysql_dbms
                                    _generated: true
                                  - node_presence: gcp_cloudsql
                                    _generated: true
                              _generated: true
              technology:
                  - ansible:
                        conditions:
                            - and:
                                  - node_presence: mysql_dbms
                                    _generated: true
                                  - not:
                                        or:
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 1
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 2
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 3
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 4
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 5
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 6
                                    _bratan: true
                              _generated: true
                            - node_presence: kubernetes
                              _generated: true
                        weight: 0.5
                        assign: mysql.dbms::ansible@kubernetes
                  - ansible:
                        conditions:
                            - and:
                                  - node_presence: mysql_dbms
                                    _generated: true
                                  - not:
                                        or:
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 0
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 2
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 3
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 4
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 5
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 6
                                    _bratan: true
                              _generated: true
                            - node_presence: gcp_cloudsql
                              _generated: true
                        weight: 1
                        assign: mysql.dbms::ansible@gcp.cloudsql
                  - ansible:
                        conditions:
                            - and:
                                  - node_presence: mysql_dbms
                                    _generated: true
                                  - not:
                                        or:
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 0
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 1
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 3
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 4
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 5
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 6
                                    _bratan: true
                              _generated: true
                            - node_presence: virtual_machine
                              _generated: true
                        weight: 1
                        assign: mysql.dbms::ansible@virtual.machine
                  - terraform:
                        conditions:
                            - and:
                                  - node_presence: mysql_dbms
                                    _generated: true
                                  - not:
                                        or:
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 0
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 1
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 2
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 4
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 5
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 6
                                    _bratan: true
                              _generated: true
                            - node_presence: kubernetes
                              _generated: true
                        weight: 0.5
                        assign: mysql.dbms::terraform@kubernetes
                  - terraform:
                        conditions:
                            - and:
                                  - node_presence: mysql_dbms
                                    _generated: true
                                  - not:
                                        or:
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 0
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 1
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 2
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 3
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 5
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 6
                                    _bratan: true
                              _generated: true
                            - node_presence: gcp_cloudsql
                              _generated: true
                        weight: 1
                        assign: mysql.dbms::terraform@gcp.cloudsql
                  - terraform:
                        conditions:
                            - and:
                                  - node_presence: mysql_dbms
                                    _generated: true
                                  - not:
                                        or:
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 0
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 1
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 2
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 3
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 4
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 6
                                    _bratan: true
                              _generated: true
                            - node_presence: virtual_machine
                              _generated: true
                        weight: 0
                        assign: mysql.dbms::terraform@virtual.machine
                  - kubernetes:
                        conditions:
                            - and:
                                  - node_presence: mysql_dbms
                                    _generated: true
                                  - not:
                                        or:
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 0
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 1
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 2
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 3
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 4
                                            - technology_presence:
                                                  - mysql_dbms
                                                  - 5
                                    _bratan: true
                              _generated: true
                            - node_presence: kubernetes
                              _generated: true
                        weight: 1
                        assign: mysql.dbms::kubernetes@kubernetes
              conditions:
                  - and:
                        - has_incoming_relation_naive: mysql_dbms
                        - host_presence: SELF
                    _generated: true
        - node_runtime:
              type:
                  - node.runtime:
                        conditions:
                            - node_presence: node_runtime
                              _generated: true
              requirements:
                  - host:
                        node: virtual_machine
                        conditions:
                            - and:
                                  - node_presence: node_runtime
                                    _generated: true
                                  - node_presence: virtual_machine
                                    _generated: true
                              _generated: true
              technology:
                  - ansible:
                        conditions:
                            - and:
                                  - node_presence: node_runtime
                                    _generated: true
                                  - not:
                                        or:
                                            - technology_presence:
                                                  - node_runtime
                                                  - 1
                                    _bratan: true
                              _generated: true
                            - node_presence: virtual_machine
                              _generated: true
                        weight: 1
                        assign: node.runtime#system.package::ansible@*->virtual.machine
                  - terraform:
                        conditions:
                            - and:
                                  - node_presence: node_runtime
                                    _generated: true
                                  - not:
                                        or:
                                            - technology_presence:
                                                  - node_runtime
                                                  - 0
                                    _bratan: true
                              _generated: true
                            - node_presence: virtual_machine
                              _generated: true
                        weight: 0
                        assign: node.runtime#system.package::terraform@*->virtual.machine
              conditions:
                  - host_presence: SELF
                    _generated: true
        - virtual_machine:
              type:
                  - virtual.machine:
                        conditions:
                            - node_presence: virtual_machine
                              _generated: true
              properties:
                  - machine_name:
                        value: unfurl-technology-shop-vm
                        conditions:
                            - node_presence: virtual_machine
                              _generated: true
                  - image:
                        value: Ubuntu 22.04
                        conditions:
                            - node_presence: virtual_machine
                              _generated: true
                  - ports:
                        value:
                            - 80
                        conditions:
                            - node_presence: virtual_machine
                              _generated: true
                  - flavor:
                        value: m1.medium
                        conditions:
                            - node_presence: virtual_machine
                              _generated: true
                            - equal:
                                  - variability_input: tier
                                  - MEDIUM
                  - flavor:
                        value: m1.large
                        conditions:
                            - node_presence: virtual_machine
                              _generated: true
                            - equal:
                                  - variability_input: tier
                                  - LARGE
                  - network:
                        value:
                            get_input: os_network
                        conditions:
                            - node_presence: virtual_machine
                              _generated: true
                  - ssh_user:
                        value:
                            get_input: os_ssh_user
                        conditions:
                            - node_presence: virtual_machine
                              _generated: true
                  - ssh_key_name:
                        value:
                            get_input: os_ssh_key_name
                        conditions:
                            - node_presence: virtual_machine
                              _generated: true
                  - ssh_key_file:
                        value:
                            get_input: os_ssh_key_file
                        conditions:
                            - node_presence: virtual_machine
                              _generated: true
              requirements:
                  - host:
                        node: openstack
                        conditions:
                            - and:
                                  - node_presence: virtual_machine
                                    _generated: true
                                  - node_presence: openstack
                                    _generated: true
                              _generated: true
              technology:
                  - ansible:
                        conditions:
                            - and:
                                  - node_presence: virtual_machine
                                    _generated: true
                                  - not:
                                        or:
                                            - technology_presence:
                                                  - virtual_machine
                                                  - 1
                                    _bratan: true
                              _generated: true
                            - node_presence: openstack
                              _generated: true
                        weight: 0.5
                        assign: virtual.machine::ansible@openstack.provider
                  - terraform:
                        conditions:
                            - and:
                                  - node_presence: virtual_machine
                                    _generated: true
                                  - not:
                                        or:
                                            - technology_presence:
                                                  - virtual_machine
                                                  - 0
                                    _bratan: true
                              _generated: true
                            - node_presence: openstack
                              _generated: true
                        weight: 1
                        assign: virtual.machine::terraform@openstack.provider
              conditions:
                  - and:
                        - has_incoming_relation_naive: virtual_machine
                        - host_presence: SELF
                    _generated: true
        - openstack:
              type:
                  - openstack.provider:
                        conditions:
                            - node_presence: openstack
                              _generated: true
              conditions:
                  - has_incoming_relation_naive: openstack
                    _generated: true
                  - equal:
                        - variability_input: env
                        - STATIC
              properties:
                  - os_region_name:
                        value:
                            get_input: os_region_name
                        conditions:
                            - node_presence: openstack
                              _generated: true
                  - os_auth_type:
                        value:
                            get_input: os_auth_type
                        conditions:
                            - node_presence: openstack
                              _generated: true
                  - os_auth_url:
                        value:
                            get_input: os_auth_url
                        conditions:
                            - node_presence: openstack
                              _generated: true
                  - os_identity_api_version:
                        value:
                            get_input: os_identity_api_version
                        conditions:
                            - node_presence: openstack
                              _generated: true
                  - os_interface:
                        value:
                            get_input: os_interface
                        conditions:
                            - node_presence: openstack
                              _generated: true
                  - os_application_credential_id:
                        value:
                            get_input: os_application_credential_id
                        conditions:
                            - node_presence: openstack
                              _generated: true
                  - os_application_credential_secret:
                        value:
                            get_input: os_application_credential_secret
                        conditions:
                            - node_presence: openstack
                              _generated: true
              technology: []
        - gcp_appengine:
              type:
                  - gcp.appengine:
                        conditions:
                            - node_presence: gcp_appengine
                              _generated: true
              requirements:
                  - host:
                        node: gcp_provider
                        conditions:
                            - and:
                                  - node_presence: gcp_appengine
                                    _generated: true
                                  - node_presence: gcp_provider
                                    _generated: true
                              _generated: true
                  - build:
                        node: gcp_cloudbuild
                        conditions:
                            - and:
                                  - node_presence: gcp_appengine
                                    _generated: true
                                  - node_presence: gcp_cloudbuild
                                    _generated: true
                              _generated: true
                  - reporting:
                        node: gcp_appenginereporting
                        conditions:
                            - and:
                                  - node_presence: gcp_appengine
                                    _generated: true
                                  - node_presence: gcp_appenginereporting
                                    _generated: true
                              _generated: true
              technology:
                  - ansible:
                        conditions:
                            - and:
                                  - node_presence: gcp_appengine
                                    _generated: true
                                  - not:
                                        or:
                                            - technology_presence:
                                                  - gcp_appengine
                                                  - 1
                                    _bratan: true
                              _generated: true
                        weight: 1
                        assign: gcp.appengine::ansible
                  - terraform:
                        conditions:
                            - and:
                                  - node_presence: gcp_appengine
                                    _generated: true
                                  - not:
                                        or:
                                            - technology_presence:
                                                  - gcp_appengine
                                                  - 0
                                    _bratan: true
                              _generated: true
                        weight: 1
                        assign: gcp.appengine::terraform
              conditions:
                  - and:
                        - has_incoming_relation_naive: gcp_appengine
                        - host_presence: SELF
                    _generated: true
        - gcp_appenginereporting:
              type:
                  - gcp.appenginereporting:
                        conditions:
                            - node_presence: gcp_appenginereporting
                              _generated: true
              technology:
                  - ansible:
                        conditions:
                            - and:
                                  - node_presence: gcp_appenginereporting
                                    _generated: true
                                  - not:
                                        or:
                                            - technology_presence:
                                                  - gcp_appenginereporting
                                                  - 1
                                    _bratan: true
                              _generated: true
                        weight: 1
                        assign: gcp.appenginereporting::ansible
                  - terraform:
                        conditions:
                            - and:
                                  - node_presence: gcp_appenginereporting
                                    _generated: true
                                  - not:
                                        or:
                                            - technology_presence:
                                                  - gcp_appenginereporting
                                                  - 0
                                    _bratan: true
                              _generated: true
                        weight: 1
                        assign: gcp.appenginereporting::terraform
              conditions:
                  - has_incoming_relation_naive: gcp_appenginereporting
                    _generated: true
        - gcp_cloudbuild:
              type:
                  - gcp.cloudbuild:
                        conditions:
                            - node_presence: gcp_cloudbuild
                              _generated: true
              requirements:
                  - host:
                        node: gcp_provider
                        conditions:
                            - and:
                                  - node_presence: gcp_cloudbuild
                                    _generated: true
                                  - node_presence: gcp_provider
                                    _generated: true
                              _generated: true
              technology:
                  - ansible:
                        conditions:
                            - and:
                                  - node_presence: gcp_cloudbuild
                                    _generated: true
                                  - not:
                                        or:
                                            - technology_presence:
                                                  - gcp_cloudbuild
                                                  - 1
                                    _bratan: true
                              _generated: true
                        weight: 1
                        assign: gcp.cloudbuild::ansible
                  - terraform:
                        conditions:
                            - and:
                                  - node_presence: gcp_cloudbuild
                                    _generated: true
                                  - not:
                                        or:
                                            - technology_presence:
                                                  - gcp_cloudbuild
                                                  - 0
                                    _bratan: true
                              _generated: true
                        weight: 1
                        assign: gcp.cloudbuild::terraform
              conditions:
                  - and:
                        - has_incoming_relation_naive: gcp_cloudbuild
                        - host_presence: SELF
                    _generated: true
        - gcp_cloudsql:
              type:
                  - gcp.cloudsql:
                        conditions:
                            - node_presence: gcp_cloudsql
                              _generated: true
              requirements:
                  - host:
                        node: gcp_provider
                        conditions:
                            - and:
                                  - node_presence: gcp_cloudsql
                                    _generated: true
                                  - node_presence: gcp_provider
                                    _generated: true
                              _generated: true
              technology:
                  - ansible:
                        conditions:
                            - and:
                                  - node_presence: gcp_cloudsql
                                    _generated: true
                                  - not:
                                        or:
                                            - technology_presence:
                                                  - gcp_cloudsql
                                                  - 1
                                    _bratan: true
                              _generated: true
                        weight: 1
                        assign: gcp.cloudsql::ansible
                  - terraform:
                        conditions:
                            - and:
                                  - node_presence: gcp_cloudsql
                                    _generated: true
                                  - not:
                                        or:
                                            - technology_presence:
                                                  - gcp_cloudsql
                                                  - 0
                                    _bratan: true
                              _generated: true
                        weight: 1
                        assign: gcp.cloudsql::terraform
              conditions:
                  - and:
                        - has_incoming_relation_naive: gcp_cloudsql
                        - host_presence: SELF
                    _generated: true
        - gcp_provider:
              type:
                  - gcp.provider:
                        conditions:
                            - node_presence: gcp_provider
                              _generated: true
              conditions:
                  - has_incoming_relation_naive: gcp_provider
                    _generated: true
                  - equal:
                        - variability_input: env
                        - ELASTIC
              properties:
                  - gcp_region:
                        value:
                            get_input: gcp_region
                        conditions:
                            - node_presence: gcp_provider
                              _generated: true
                  - gcp_service_account_file:
                        value:
                            get_input: gcp_service_account_file
                        conditions:
                            - node_presence: gcp_provider
                              _generated: true
                  - gcp_project:
                        value:
                            get_input: gcp_project
                        conditions:
                            - node_presence: gcp_provider
                              _generated: true
              technology: []
        - kubernetes:
              type:
                  - kubernetes:
                        conditions:
                            - node_presence: kubernetes
                              _generated: true
              conditions:
                  - has_incoming_relation_naive: kubernetes
                    _generated: true
                  - equal:
                        - variability_input: env
                        - KUBERNETES
              properties:
                  - k8s_host:
                        value:
                            get_input: k8s_host
                        conditions:
                            - node_presence: kubernetes
                              _generated: true
                  - k8s_ca_cert_file:
                        value:
                            get_input: k8s_ca_cert_file
                        conditions:
                            - node_presence: kubernetes
                              _generated: true
                  - k8s_client_cert_file:
                        value:
                            get_input: k8s_client_cert_file
                        conditions:
                            - node_presence: kubernetes
                              _generated: true
                  - k8s_client_key_file:
                        value:
                            get_input: k8s_client_key_file
                        conditions:
                            - node_presence: kubernetes
                              _generated: true
              technology: []
