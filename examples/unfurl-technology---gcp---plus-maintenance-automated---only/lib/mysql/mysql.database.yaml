tosca_definitions_version: tosca_simple_yaml_1_3

imports:
    - ../base.yaml

node_types:
    ###################################################
    #
    # Abstract
    #
    ###################################################

    mysql.database:
        derived_from: relational.database

        properties:
            database_name:
                type: string

            database_user:
                type: string

            database_password:
                type: string

        attributes:
            application_address:
                type: string
                default: {eval: '.::.requirements[.name=host]::.target::application_address'}

            application_port:
                type: integer
                default: {eval: '.::.requirements[.name=host]::.target::application_port'}

        capabilities:
            database:
                type: tosca.capabilities.Endpoint.Database

        requirements:
            - host:
                  capability: tosca.capabilities.Compute
                  relationship: tosca.relationships.HostedOn

    # TODO: mysql.database.ansible.mysql.openstack
    # TODO: mysql.database.terraform.mysql.openstack

    # TODO: mysql.database.ansible.mysql.docker
    # TODO: mysql.database.terraform.mysql.docker
    # TODO: mysql.database.docker.mysql.docker

    # TODO: mysql.database.ansible.mysql.kubernetes
    # TODO: mysql.database.terraform.mysql.kubernetes
    # TODO: mysql.database.kubernetes.mysql.kubernetes

    # TODO: mysql.database.ansible.mysql.gcp
    # TODO: mysql.database.terraform.mysql.gcp
