tosca_definitions_version: tosca_simple_yaml_1_3

node_types:
    sensor.compute:
        derived_from: tosca.nodes.SoftwareComponent
        properties:
            vintner_host:
                type: string
                default: localhost

            vintner_port:
                type: string
                default: 3000

            instance:
                type: string

            template:
                type: template

            time_interval:
                type: string
                default: 'every 10 seconds'

            disable_submission:
                type: boolean
                default: false

            ssh_user:
                type: string
                default: {get_property: [SELF, host, ssh_user]}

            ssh_key_file:
                type: string
                default: {get_property: [SELF, host, ssh_key_file]}
        interfaces:
            Standard:
                type: tosca.interfaces.node.lifecycle.Standard
                inputs:
                    vintner_host:
                        value:
                            get_property: [SELF, vintner_host]
                        type: string

                    vintner_port:
                        value:
                            get_property: [SELF, vintner_port]
                        type: string

                    instance:
                        value:
                            get_property: [SELF, instance]
                        type: string

                    template:
                        value:
                            get_property: [SELF, template]
                        type: string

                    time_interval:
                        value:
                            get_property: [SELF, time_interval]
                        type: string

                    disable_submission:
                        value:
                            get_property: [SELF, disable_submission]
                        type: boolean

                    ssh_user:
                        type: string
                        default: {get_property: [SELF, host, ssh_user]}

                    ssh_key_file:
                        type: string
                        default: {get_property: [SELF, host, ssh_key_file]}

                operations:
                    create: compute/playbooks/create.yaml
                    configure: compute/playbooks/configure.yaml
                    start: compute/playbooks/start.yaml
                    delete: compute/playbooks/delete.yaml
                    stop: compute/playbooks/stop.yaml

    sensor.weekday:
        derived_from: tosca.nodes.SoftwareComponent
        properties:
            vintner_host:
                type: string
                default: localhost

            vintner_port:
                type: string
                default: 3000

            instance:
                type: string

            time_interval:
                type: string
                default: 'every day'

            disable_submission:
                type: boolean
                default: false

            ssh_user:
                type: string
                default: {get_property: [SELF, host, ssh_user]}

            ssh_key_file:
                type: string
                default: {get_property: [SELF, host, ssh_key_file]}
        interfaces:
            Standard:
                type: tosca.interfaces.node.lifecycle.Standard
                inputs:
                    vintner_host:
                        value:
                            get_property: [SELF, vintner_host]
                        type: string
                    vintner_port:
                        value:
                            get_property: [SELF, vintner_port]
                        type: string
                    instance:
                        value:
                            get_property: [SELF, instance]
                        type: string
                    time_interval:
                        value:
                            get_property: [SELF, time_interval]
                        type: string
                    disable_submission:
                        value:
                            get_property: [SELF, disable_submission]
                        type: boolean

                    ssh_user:
                        type: string
                        default: {get_property: [SELF, host, ssh_user]}

                    ssh_key_file:
                        type: string
                        default: {get_property: [SELF, host, ssh_key_file]}

                operations:
                    create: weekday/playbooks/create.yaml
                    configure: weekday/playbooks/configure.yaml
                    start: weekday/playbooks/start.yaml
                    delete: weekday/playbooks/delete.yaml
                    stop: weekday/playbooks/stop.yaml
